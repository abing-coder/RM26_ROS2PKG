#!/bin/bash

# 增量编译脚本 - 只编译修改过的文件

# 获取脚本所在目录的绝对路径
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
WORKSPACE_DIR="$SCRIPT_DIR"

echo "=========================================="
echo "开始增量编译..."
echo "工作空间: $WORKSPACE_DIR"
echo "=========================================="

cd "$WORKSPACE_DIR"

# 使用 colcon build 进行增量编译
colcon build

# 检查编译结果
if [ $? -eq 0 ]; then
    echo "=========================================="
    echo "增量编译成功完成!"
    echo "=========================================="
    exit 0
else
    echo "=========================================="
    echo "编译失败，请检查错误信息"
    echo "=========================================="
    exit 1
fi
